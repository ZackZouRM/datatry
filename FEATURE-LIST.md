# Knowledge Universe - 完整功能列表

## 📋 产品概述
**产品名称：** Knowledge Universe（知识宇宙系统）  
**核心价值：** AI驱动的数据分析平台，以星际/血缘视觉呈现数据关系  
**目标用户：** 数据分析师、业务决策者、数据科学家

---

## 🎬 用户流程（完整路径）

### Phase 0: 欢迎与认证
- [ ] 0.1 飞行宇宙开场动画
- [ ] 0.2 登录/注册
- [ ] 0.3 个人Dashboard（已有项目星系）
- [ ] 0.4 创建新宇宙

### Phase 1: 数据导入
- [ ] 1.1 命名知识宇宙
- [ ] 1.2 初始化宇宙
- [ ] 1.3 选择数据源（上传文件 / 连接数据库）
- [ ] 1.4 自动数据清洗
- [ ] 1.5 业务理解QA（3阶段）
- [ ] 1.6 数据饱满度检查

### Phase 2: 知识宇宙构建
- [ ] 2.1 生成知识星球
- [ ] 2.2 建立数据连接
- [ ] 2.3 计算饱满度

### Phase 3: 交互分析
- [ ] 3.1 AI对话分析
- [ ] 3.2 星球详情查看
- [ ] 3.3 拖拽重排
- [ ] 3.4 创建自定义视图
- [ ] 3.5 导出报告

---

## 🌟 功能模块详细清单

### 1. 用户认证系统

#### 1.1 登录功能
- [x] 邮箱输入
- [x] 验证码发送（60秒倒计时）
- [x] 验证码验证
- [x] Google OAuth登录
- [x] 登录状态保持

#### 1.2 注册功能
- [x] 邮箱注册
- [x] 姓名输入
- [x] 验证码验证
- [x] Google OAuth注册

---

### 2. 数据导入系统

#### 2.1 文件上传
- [x] 拖拽上传（Drag & Drop）
- [x] 点击浏览上传
- [x] 多文件批量上传
- [x] 支持格式：
  - [x] 表格：CSV, XLSX, XLS, JSON
  - [x] 数据：Parquet, XML, JSONL, TSV
  - [x] 数据库：SQL, DB, SQLite
  - [x] 文档：TXT, PDF
- [x] 文件信息展示（名称、大小）
- [x] 文件列表预览

#### 2.2 数据库连接
- [x] 快速连接按钮（4个主流数据库）
  - [x] MySQL
  - [x] PostgreSQL
  - [x] MongoDB
  - [x] Snowflake
- [x] 更多数据库选项（展开）
  - [x] Redis
  - [x] BigQuery
  - [x] Redshift
  - [x] Oracle
- [x] 模拟连接过程
- [x] 表扫描和发现
- [x] 表选择导入

#### 2.3 数据清洗
- [x] 自动清洗进度展示
  - [x] Core星球进度环（0-100%）
  - [x] 百分比实时更新
- [x] 清洗任务列表
  - [x] Schema analysis
  - [x] Missing values
  - [x] Outlier detection
  - [x] Type inference
  - [x] Duplicate check
  - [x] Standardization
- [x] 清洗结果总结
- [x] 数据星球逐个激活动画

---

### 3. 业务理解QA系统

#### 3.1 Phase 1: 业务背景
- [x] AI推测业务类型
- [x] 业务描述（谁/做啥/为何）
- [x] 置信度标注 [需确认]
- [x] 用户确认/修改/跳过

#### 3.2 Phase 2: 应用场景
- [x] 分析目标推测
- [x] 关键问题列表
- [x] 使用场景描述
- [x] 用户确认/调整

#### 3.3 Phase 3: 数据细节
- [x] 时间粒度确认
- [x] 主键关系映射
- [x] 时间字段识别
- [x] 指标口径统一
- [x] 用户确认/调整

#### 3.4 澄清流程（Clarify）
- [x] 重新提问引导
- [x] 对话式澄清
- [x] 重新分析数据需求
- [x] 低饱满度警告
- [x] 补充数据流程

---

### 4. 数据饱满度评估

#### 4.1 饱满度计算
- [x] 基于业务目标计算
- [x] 百分比展示（0-100%）
- [x] Core星球实时显示

#### 4.2 饱满度等级
- [x] 高饱满度（≥80%）- 绿色
- [x] 中等（60-79%）- 橙色
- [x] 低饱满度（<60%）- 红色闪烁

#### 4.3 缺失数据建议
- [x] 列出缺失数据类型
- [x] 影响分析（+X%饱满度）
- [x] 优先级排序
- [x] 可解锁的分析能力说明

#### 4.4 数据补充流程
- [x] 添加更多数据选项
- [x] 继续/稍后选择
- [x] 二次导入流程
- [x] 饱满度提升反馈

---

### 5. 知识宇宙可视化

#### 5.1 星球系统
- [x] Core核心节点（北极星指标）
- [x] 数据星球节点（3-5个）
- [x] 星球大小（基于数据量）
- [x] 星球颜色（基于类型）
- [x] 星球亮度（基于饱满度）
- [x] 标签和数值显示

#### 5.2 连接关系
- [x] 血脉连接线
- [x] 虚线动画（能量流动）
- [x] 连接强度可视化
- [x] 激活状态高亮

#### 5.3 交互能力
- [x] 点击星球选中
- [x] 拖拽星球移动
- [x] 连接线实时跟随
- [x] 点击空白取消选中
- [x] 悬停高亮效果

---

### 6. AI对话交互

#### 6.1 对话界面
- [x] 悬浮消息卡片（数据导入阶段）
  - [x] AI消息（左侧）
  - [x] 用户消息（右侧）
  - [x] 自动堆叠布局
  - [x] 可滚动查看
- [x] 侧边栏对话（主界面）
  - [x] 消息流显示
  - [x] 打字指示器
  - [x] 时间戳

#### 6.2 消息管理
- [x] 消息历史记录
- [x] 历史面板（💬按钮）
- [x] 消息计数显示
- [x] 手动关闭单条消息
- [x] 旧消息淡化（保持可见）

#### 6.3 输入增强
- [x] 底部输入栏（数据导入）
- [x] 侧边输入框（主界面）
- [x] 快捷操作按钮（输入框上方）
- [x] 智能建议芯片
- [x] 选中星球状态提示

---

### 7. 数据分析功能

#### 7.1 渠道分析
- [x] 重复购买率对比
- [x] 渠道排名
- [x] 详细数据展示
- [x] 洞察和建议

#### 7.2 队列分析
- [x] 月度队列创建
- [x] 留存曲线（8周）
- [x] 队列对比
- [x] 流失原因分析

#### 7.3 邮件营销分析
- [x] 活动表现数据
- [x] 打开率/点击率
- [x] 收入归因
- [x] 优化建议

#### 7.4 流失分析
- [x] Top 5流失触发因素
- [x] 受影响用户群
- [x] 可执行修复建议
- [x] 潜在影响估算

---

### 8. 星球详情系统

#### 8.1 详情面板
- [x] 右侧滑入展示
- [x] 三个区块：
  - [x] 📊 Overview（总览）
  - [x] 📈 Key Metrics（关键指标）
  - [x] 💡 Key Insights（洞察）

#### 8.2 每个星球的详细数据
- [x] **User Events**：
  - [x] 总事件数、用户数
  - [x] 事件类型分布
  - [x] 移动端占比
  - [x] 峰值时间
  
- [x] **Orders**：
  - [x] 订单总数、GMV
  - [x] AOV、完成率
  - [x] 热销品类
  - [x] 退货率
  
- [x] **Users**：
  - [x] 总用户、新用户
  - [x] 留存率、流失率
  - [x] 获客渠道
  - [x] 人口统计

#### 8.3 输入框状态
- [x] 选中星球：橙色边框
- [x] Placeholder动态更新
- [x] 取消选中：恢复默认

---

### 9. 视图创建系统

#### 9.1 视图类型
- [x] Analytics Dashboard（分析仪表盘）
- [x] Monitor Dashboard（实时监控）
- [x] Notes & Insights（笔记洞察）
- [x] Goal Tracking（目标追踪）

#### 9.2 视图内容（假数据展示）
- [x] 实时指标
- [x] 告警配置
- [x] 关键洞察
- [x] 目标进度条
- [x] 可视化图表描述

---

### 10. 导出功能
- [x] 导出准备提示
- [x] 格式说明（PDF）
- [x] 内容预览
- [x] 文件大小估算
- [x] 生成进度
- [x] 完成通知

---

### 11. 视觉动画系统

#### 11.1 开场动画
- [x] 星球飞行（从中心向8方向）
- [x] 飞行速度控制
- [x] 错开时间间隔
- [x] 10个业务主题星球

#### 11.2 初始化动画
- [x] 核心节点脉动
- [x] 进度条流动效果
- [x] 任务列表逐个完成
- [x] 完成打勾动画

#### 11.3 数据注入动画
- [x] 能量粒子（20个）
- [x] 从两侧飞向核心
- [x] 核心激活发光
- [x] 数据节点逐个出现

#### 11.4 交互动画
- [x] 星球悬停放大
- [x] 选中强光晕
- [x] 连接线高亮
- [x] 消息淡入
- [x] 按钮悬停提升
- [x] 进度环填充

---

### 12. 个人Dashboard

#### 12.1 项目管理
- [x] 已有项目展示（星系图）
- [x] 项目缩略图（3个示例）
- [x] 最后修改时间
- [x] 点击打开项目
- [x] 中心创建新项目

#### 12.2 项目信息
- [x] 项目名称
- [x] 数据星球数量
- [x] 更新时间
- [x] 快速预览

---

### 13. 技术特性

#### 13.1 响应式设计
- [x] 桌面端布局（1440px+）
- [x] 笔记本适配（1024-1439px）
- [ ] 平板适配（768-1023px）
- [ ] 移动端适配（<768px）

#### 13.2 性能优化
- [x] CSS动画（GPU加速）
- [x] SVG矢量图形
- [x] 懒加载消息
- [x] 虚拟滚动（消息列表）

#### 13.3 交互优化
- [x] 防抖处理
- [x] 节流控制
- [x] 平滑滚动
- [x] 拖拽边界限制

---

## 📊 数据处理能力

### 1. 数据源支持
- [x] 文件类型（12种）
- [x] 数据库类型（8种）
- [x] API接口（占位）
- [ ] 实时数据流

### 2. 数据清洗
- [x] Schema分析
- [x] 类型推断
- [x] 缺失值检测
- [x] 异常值识别
- [x] 重复数据移除
- [x] 字段标准化

### 3. 数据关系
- [x] 主键识别
- [x] 外键关系
- [x] 时间字段统一
- [x] 指标口径对齐

---

## 🤖 AI功能

### 1. 自然语言理解
- [x] 业务类型推断
- [x] 分析目标识别
- [x] 数据结构解析
- [x] 用户意图理解

### 2. 分析能力
- [x] 渠道分析
- [x] 队列分析
- [x] 留存分析
- [x] 流失分析
- [x] 邮件营销分析
- [x] 趋势分析（占位）

### 3. 洞察生成
- [x] 关键发现提取
- [x] 可执行建议
- [x] 影响估算
- [x] 优先级排序

### 4. 对话能力
- [x] 上下文理解
- [x] 多轮对话
- [x] 澄清式提问
- [x] 智能建议

---

## 🎨 视觉设计系统

### 1. 配色方案
**Star Version:**
- [x] 深空黑背景
- [x] 能量青主色
- [x] 星云蓝辅助
- [x] 状态色系（绿/黄/红）

**Susu Version (待开发):**
- [ ] 温暖黄主题
- [ ] 花园美学
- [ ] 有机生长

### 2. 字体系统
- [x] Orbitron（标题/数据）
- [x] Inter（正文）
- [x] JetBrains Mono（代码/指标）

### 3. 特效系统
- [x] CRT扫描线
- [x] 发光效果
- [x] 脉动动画
- [x] 粒子系统
- [x] 渐变过渡

---

## 💬 消息与通知

### 1. 消息类型
- [x] AI回复消息
- [x] 用户输入消息
- [x] 系统通知
- [x] 打字指示器

### 2. 消息展示
- [x] 悬浮卡片（数据导入）
- [x] 侧边栏（主界面）
- [x] 时间戳
- [x] 头像/图标

### 3. 消息管理
- [x] 历史记录（💬面板）
- [x] 消息计数
- [x] 手动关闭
- [x] 自动淡化（旧消息）
- [x] 可滚动查看

---

## 🎯 快捷操作

### 1. 操作按钮
- [x] 动态按钮（输入框上方）
- [x] 主要/次要样式
- [x] 上下文相关
- [x] 自动清除/更新

### 2. 智能建议
- [x] 建议芯片
- [x] 点击执行
- [x] 动态更新
- [x] 上下文感知

---

## 📤 导出与集成

### 1. 导出功能
- [x] PDF报告生成
- [x] 内容选择
- [x] 进度展示
- [x] 完成通知
- [ ] 实际文件下载

### 2. 集成能力（占位）
- [ ] Slack通知
- [ ] Email推送
- [ ] API导出
- [ ] Webhook

---

## 💳 支付与订阅系统

### 1. Credit计费模式

#### 1.1 Credit余额管理
- [ ] Credit余额显示（顶部导航栏）
- [ ] 实时余额更新
- [ ] 余额不足警告
- [ ] 消费记录查看

#### 1.2 扣费规则
**按用量扣减：**
- [ ] 数据导入：
  - 文件上传：1 Credit / 100MB
  - 数据库连接：5 Credits / 次
- [ ] AI对话：
  - 简单问答：1 Credit / 次
  - 复杂分析：3 Credits / 次
  - 队列分析：5 Credits / 次
- [ ] 数据清洗：
  - 自动清洗：2 Credits / 10万行
  - 高级清洗：5 Credits / 10万行
- [ ] 导出功能：
  - PDF报告：10 Credits / 次
  - 数据导出：5 Credits / 次
- [ ] 视图创建：
  - 标准视图：3 Credits / 个
  - 自定义视图：8 Credits / 个

#### 1.3 Credit消费提示
- [ ] 操作前费用预览
- [ ] 确认弹窗
- [ ] 消费后余额变化动画
- [ ] 消费历史记录

---

### 2. 订阅套餐

#### 2.1 套餐设计

**Free Plan（免费版）**
- [ ] 100 Credits / 月（自动充值）
- [ ] 1个知识宇宙
- [ ] 3个数据星球
- [ ] 基础AI分析
- [ ] 社区支持

**Pro Plan（专业版）**
- [ ] $29 / 月
- [ ] 1000 Credits / 月
- [ ] 无限知识宇宙
- [ ] 无限数据星球
- [ ] 高级AI分析
- [ ] 优先支持
- [ ] 自定义视图

**Team Plan（团队版）**
- [ ] $99 / 月
- [ ] 5000 Credits / 月（团队共享）
- [ ] 5个团队成员
- [ ] 协作功能
- [ ] 数据权限管理
- [ ] API访问
- [ ] 专属客户经理

**Enterprise Plan（企业版）**
- [ ] 联系销售
- [ ] 自定义Credits
- [ ] 无限团队成员
- [ ] 私有部署选项
- [ ] SLA保证
- [ ] 定制开发
- [ ] 企业级安全

#### 2.2 套餐功能
- [ ] 套餐对比表
- [ ] 当前套餐显示
- [ ] 升级/降级
- [ ] 试用期（14天）
- [ ] 取消订阅

---

### 3. Credit充值

#### 3.1 充值包
**单次充值包：**
- [ ] Starter Pack: $10 → 200 Credits
- [ ] Growth Pack: $50 → 1,200 Credits (+20% bonus)
- [ ] Power Pack: $100 → 2,800 Credits (+40% bonus)
- [ ] Ultimate Pack: $300 → 10,000 Credits (+67% bonus)

#### 3.2 充值流程
- [ ] 选择充值包
- [ ] 支付方式选择
  - [ ] 信用卡/借记卡
  - [ ] PayPal
  - [ ] Apple Pay
  - [ ] Google Pay
  - [ ] 支付宝（中国区）
  - [ ] 微信支付（中国区）
- [ ] 支付确认
- [ ] 充值成功动画
- [ ] Credit到账通知

#### 3.3 充值界面
- [ ] 充值弹窗/页面
- [ ] 充值包卡片展示
- [ ] 推荐标签（最划算）
- [ ] Bonus高亮显示
- [ ] 支付表单
- [ ] 安全提示

---

### 4. Credit展示组件

#### 4.1 顶部余额显示
- [ ] Credit图标 + 数字
- [ ] 悬停显示详情
  - [ ] 当前余额
  - [ ] 本月已用
  - [ ] 套餐剩余
  - [ ] 下次充值日期（订阅用户）
- [ ] 余额不足红色警告
- [ ] 点击进入充值页面

#### 4.2 消费预览
- [ ] 操作前显示费用
  - "This analysis will cost 3 Credits"
- [ ] 余额检查
  - 余额足够：正常执行
  - 余额不足：提示充值
- [ ] 确认对话框
  - [x] Confirm (3 Credits)
  - [x] Cancel

#### 4.3 消费通知
- [ ] 操作后扣费动画
- [ ] 余额数字滚动更新
- [ ] Toast提示："Used 3 Credits, 247 remaining"
- [ ] 消费记录添加

---

### 5. 账单与记录

#### 5.1 消费历史
- [ ] 消费记录列表
  - [ ] 时间
  - [ ] 操作类型
  - [ ] Credit消费
  - [ ] 剩余余额
- [ ] 筛选功能
  - [ ] 按时间
  - [ ] 按类型
  - [ ] 按项目
- [ ] 导出账单（CSV/PDF）

#### 5.2 充值历史
- [ ] 充值记录列表
  - [ ] 时间
  - [ ] 金额
  - [ ] Credits获得
  - [ ] 支付方式
- [ ] 发票下载

#### 5.3 订阅管理
- [ ] 当前订阅状态
- [ ] 下次扣费日期
- [ ] 订阅历史
- [ ] 发票管理
- [ ] 自动续费设置
- [ ] 取消订阅

---

### 6. 支付安全

#### 6.1 安全措施
- [ ] HTTPS加密
- [ ] PCI DSS合规
- [ ] 3D Secure验证
- [ ] 反欺诈检测
- [ ] 敏感信息加密

#### 6.2 支付状态
- [ ] 处理中状态
- [ ] 成功确认
- [ ] 失败重试
- [ ] 超时处理
- [ ] 退款流程

---

### 7. UI组件设计

#### 7.1 Credit Badge（余额徽章）
```
┌─────────────────┐
│ 💎 247 Credits  │ ← 顶部导航栏
└─────────────────┘
   悬停展开详情 ↓
┌──────────────────────┐
│ Current Balance      │
│ 💎 247 Credits       │
│                      │
│ This Month           │
│ Used: 53 Credits     │
│ Remaining: 247       │
│                      │
│ [💳 Recharge]        │
└──────────────────────┘
```

#### 7.2 充值弹窗
```
┌────────────────────────────────┐
│   💎 Recharge Credits          │
├────────────────────────────────┤
│                                │
│  ┌──────┐ ┌──────┐ ┌──────┐   │
│  │ $10  │ │ $50  │ │ $100 │   │
│  │ 200  │ │1,200 │ │2,800 │   │ ← Bonus标签
│  │Credits│ │+20% │ │+40% │   │
│  └──────┘ └──────┘ └──────┘   │
│                                │
│  Payment Method:               │
│  ○ Credit Card                 │
│  ○ PayPal                      │
│  ○ Apple Pay                   │
│                                │
│        [Cancel] [Pay $50]      │
└────────────────────────────────┘
```

#### 7.3 消费确认对话框
```
┌────────────────────────────┐
│  Confirm Analysis          │
├────────────────────────────┤
│  This cohort analysis will │
│  cost 5 Credits            │
│                            │
│  Your balance: 247 Credits │
│  After: 242 Credits        │
│                            │
│    [Cancel] [✓ Confirm]    │
└────────────────────────────┘
```

#### 7.4 余额不足提示
```
┌────────────────────────────┐
│  ⚠ Insufficient Credits    │
├────────────────────────────┤
│  This operation requires   │
│  5 Credits                 │
│                            │
│  Your balance: 2 Credits   │
│  Need: 3 more Credits      │
│                            │
│    [Cancel] [💳 Recharge]  │
└────────────────────────────┘
```

---

### 8. Credit定价策略

#### 8.1 定价逻辑
- **数据处理** - 按数据量
- **AI分析** - 按复杂度
- **存储** - 按项目数
- **导出** - 按次数

#### 8.2 Bonus激励
- 充值越多，Bonus越高
- 订阅用户额外10% Bonus
- 推荐好友赠送Credits
- 首次充值双倍Bonus

#### 8.3 免费额度
- 每月100 Credits自动充值
- 新用户注册赠送50 Credits
- 完成教程赠送20 Credits
- 分享项目赠送10 Credits

---

## 🔔 通知系统（与Credit相关）

### Credit通知
- [ ] 余额低于20时提醒
- [ ] 余额为0时阻止操作
- [ ] 充值成功通知
- [ ] 订阅续费提醒
- [ ] 消费异常警告

---

## 🎯 订阅功能实现优先级

### P0（必须）
- [ ] Credit余额显示
- [ ] 基础扣费逻辑
- [ ] 余额不足提示
- [ ] 充值页面
- [ ] 订阅套餐页面

### P1（重要）
- [ ] 消费预览
- [ ] 消费记录
- [ ] 充值历史
- [ ] 订阅管理
- [ ] 发票系统

### P2（增强）
- [ ] 推荐奖励
- [ ] 企业定制
- [ ] API计费
- [ ] 使用分析

---

**支付模块完成度：** 0%（待开发）  
**建议优先级：** P1（重要但不阻塞核心功能）

---

## 🔧 开发者功能

### 1. 版本控制
- [x] 版本选择器
- [x] Star版本（完整）
- [x] Susu版本（占位）
- [x] 版本切换按钮
- [x] 版本说明文档

### 2. 调试工具
- [x] Console日志
- [x] 状态追踪
- [x] 事件监听器
- [ ] 性能监控

---

## 📈 数据展示

### 1. 图表类型（描述性）
- [x] 条形图描述
- [x] 折线图描述
- [x] 百分比展示
- [x] 进度条
- [ ] 实际可视化库

### 2. 指标展示
- [x] 大数字卡片
- [x] 变化趋势（↗↘）
- [x] 百分比变化
- [x] 时间对比

---

## 🎮 交互设计

### 1. 输入方式
- [x] 文本输入
- [x] 按钮点击
- [x] 拖拽上传
- [x] 星球拖拽
- [x] SVG点击

### 2. 反馈机制
- [x] 悬停效果
- [x] 点击反馈
- [x] 加载状态
- [x] 成功/错误提示
- [x] 进度指示

### 3. 导航方式
- [x] 场景切换
- [x] 面板滑入/滑出
- [x] 模态框（保留兼容）
- [x] 返回/关闭

---

## 🚀 已实现功能统计

### 核心功能
- ✅ 用户认证：100%
- ✅ 数据导入：90%（缺实际处理）
- ✅ 数据清洗：80%（模拟流程）
- ✅ 业务QA：100%
- ✅ 知识宇宙：95%
- ✅ AI对话：85%
- ✅ 星球交互：100%
- ✅ 分析功能：60%（假数据）
- ✅ 导出功能：50%（假流程）

### 视觉体验
- ✅ 动画系统：95%
- ✅ 响应式：70%
- ✅ 主题切换：80%
- ✅ 特效：90%

### 整体完成度
**前端演示：85%**  
**后端集成：0%**（纯前端演示）  
**完整产品：40%**

---

## 🎯 待开发功能

### 短期（P0）
- [ ] 实际数据处理（Papa Parse, DuckDB-WASM）
- [ ] 真实AI集成（OpenAI/Claude API）
- [ ] 实际图表库（ECharts/D3.js）
- [ ] 文件下载功能

### 中期（P1）
- [ ] 移动端适配
- [ ] Susu版本完整实现
- [ ] 多用户协作
- [ ] 数据持久化

### 长期（P2）
- [ ] 实时数据连接
- [ ] 自定义分析代码
- [ ] 插件系统
- [ ] 企业版功能

---

## 📄 文件清单

### 核心文件
- `index.html` - Star版本主文件
- `styles.css` - Star版本样式（2200+行）
- `script.js` - 共享逻辑（1700+行）

### 辅助文件
- `index-selector.html` - 版本选择器
- `index-susu.html` - Susu占位页
- `styles-susu.css` - Susu样式（待开发）

### 文档文件
- `README.md` - 项目说明
- `VERSION-CONTROL.md` - 版本系统说明
- `FEATURE-LIST.md` - 本功能清单

---

**最后更新：** 2024-10-17  
**当前版本：** Star v1.0（可演示）  
**下一步：** 根据需求继续完善

